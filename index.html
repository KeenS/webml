<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <title></title>
        <script>
         // Emscriptenで使用するModuleオブジェクト。
         // グローバルで宣言する。
         var Module = {};
         var importObj = {"webml-rt": {
             alloc: (x) => x,
             print: (x) => console.log(x),
             /* import2: () => console.log("world!")*/
         }};
         fetch('out.wasm').then(response =>
             response.arrayBuffer()
         ).then(buffer =>
             WebAssembly.instantiate(buffer, importObj)
         ).then(({module, instance}) => {
             const scriptElem = document.createElement('script');
             scriptElem.src = 'out.js';
             document.body.appendChild(scriptElem);
         }
         );
        </script>
    </head>
    <body></body>
</html>
